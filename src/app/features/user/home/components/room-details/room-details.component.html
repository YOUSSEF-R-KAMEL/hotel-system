<div class="container">
  <nav
    aria-label="breadcrumb"
    class="d-flex justify-content-around align-items-center mt-5 mb-5"
  >
    <ol class="breadcrumb mb-0">
      <li class="breadcrumb-item">
        <a routerLink="/home"> {{ "details-page.home" | translate }} </a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">
        {{ "details-page.details" | translate }}
      </li>
    </ol>
    <h1 class="text-center blue-text fw-bolder">
      Room number {{ currentRoomDetails?.roomNumber }}
    </h1>
  </nav>
  <div id="imageCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
      <div
        class="carousel-item"
        *ngFor="let img of currentRoomDetails?.images; let i = index"
        [class.active]="i === 0"
      >
        <img [src]="img" class="d-block w-100" alt="Room Image" />
      </div>
    </div>
    <button
      class="carousel-control-prev"
      type="button"
      data-bs-target="#imageCarousel"
      data-bs-slide="prev"
    >
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button
      class="carousel-control-next"
      type="button"
      data-bs-target="#imageCarousel"
      data-bs-slide="next"
    >
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>

  <div class="mt-5 row">
    <div class="col-md-6">
      <p class="grey-text fs-5">
        Lorem ipsum dolor sit, amet consectetur adipisicing elit. Nihil nobis,
        laborum est itaque obcaecati modi vel eos excepturi impedit molestiae
        praesentium veniam doloribus omnis quibusdam ad tenetur! Accusamus,
        laudantium qui? Lorem ipsum dolor sit, amet consectetur adipisicing
        elit. Nihil nobis, laborum est itaque obcaecati modi vel eos excepturi
        impedit molestiae praesentium veniam doloribus omnis quibusdam ad
        tenetur! Accusamus, laudantium qui? Lorem ipsum dolor sit, amet
        consectetur adipisicing elit. Nihil nobis, laborum est itaque obcaecati
        modi vel eos excepturi impedit molestiae praesentium veniam doloribus
        omnis quibusdam ad tenetur! Accusamus, laudantium qui? Lorem ipsum dolor
        sit, amet consectetur adipisicing elit. Nihil nobis, laborum est itaque
      </p>
      <div class="facilities d-flex flex-wrap row-gap-3">
        @for (fa of currentRoomDetails?.facilities; track fa._id) {

        <div
          class="facility-container d-flex flex-column justify-content-around"
        >
          <img
            [src]="
              'assets/images/svg/facility-icons/' +
              (facilityIcons[fa.name] || 'default-icon') +
              '.svg'
            "
            alt="{{ fa.name }}"
            class="facility-icon me-2"
          />
          <span>{{ fa.name }} </span>
        </div>
        }
      </div>
    </div>
    <div class="col-md-6">
      <div class="start-booking">
        <h4>{{ "home-page.booking.start" | translate }}</h4>
        <p>
          <span>${{ currentRoomDetails?.price }}</span>
          {{ "home-page.popular.per" | translate }}
        </p>
        <span class="text-danger"
          >{{ "home-page.popular.discount" | translate }}: ${{
            currentRoomDetails?.discount
          }}
        </span>
        <form
          [formGroup]="checkoutRoomForm"
          (ngSubmit)="onSubmit(checkoutRoomForm)"
        >
          <label>{{ "details-page.pick" | translate }}</label>
          <!-- <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1"
              ><img
                src="../../../../../../assets/images/svg/calendar.svg"
                alt=""
            /></span>
            <input
              type="text"
              class="form-control"
              placeholder="20 Jan - 22 Jan"
              aria-label="Username"
              aria-describedby="basic-addon1"
            />
          </div> -->
          <mat-form-field class="date-input">
            <mat-label>{{
              "home-page.booking.inputLabel" | translate
            }}</mat-label>
            <mat-date-range-input [rangePicker]="picker">
              <input
                matStartDate
                formControlName="startDate"
                placeholder="Start date"
              />
              <input
                matEndDate
                formControlName="endDate"
                placeholder="End date"
              />
            </mat-date-range-input>
            <!-- <mat-hint>{{ 'home-page.booking.date-hint' | translate }} â€“ {{ 'home-page.booking.date-hint' | translate }}</mat-hint> -->
            <mat-datepicker-toggle
              matIconPrefix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>
            @if
            (checkoutRoomForm.controls.startDate.hasError('matStartDateInvalid'))
            {
            <mat-error>{{
              "home-page.booking.invalid-start-date" | translate
            }}</mat-error>
            } @if
            (checkoutRoomForm.controls.endDate.hasError('matEndDateInvalid')) {
            <mat-error>{{
              "home-page.booking.invalid-end-date" | translate
            }}</mat-error>
            }
          </mat-form-field>

          <span class="pay"
            >{{ "details-page.will-pay" | translate }}
            <span class="num">{{
              sum(currentRoomDetails?.price!, currentRoomDetails?.capacity!)
                | number : "1.0-0"
            }}</span>
            {{ "details-page.usd" | translate }}
            <span class="num">
              {{ currentRoomDetails?.capacity }}
              {{ "details-page.person" | translate }}</span
            ></span
          >
          <div class="text-center mt-2">
            <button
              type="submit"
              [disabled]="checkoutRoomForm.invalid"
              class="explore-btn"
              mat-raised-button
              color="primary"
            >
              {{ "details-page.continue" | translate }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="details">
    <div class="rate-comment">
      <div class="row">
        <div class="col-md-6">
          <div class="rate" [ngClass]="{ ar: currentLang == 'ar' }">
            <h3>{{ "details-page.rate" | translate }}</h3>
            <div class="stars">
              <i class="fa-solid fa-star"></i>
              <i class="fa-solid fa-star"></i>
              <i class="fa-solid fa-star"></i>
              <i class="fa-solid fa-star"></i>
            </div>
            <h4 class="my-4">{{ "details-page.message" | translate }}</h4>
            <form>
              <textarea name="" id=""></textarea>
              <button class="explore-btn" mat-raised-button color="primary">
                {{ "details-page.rate" | translate }}
              </button>
            </form>
          </div>
        </div>
        <div class="col-md-6">
          <div class="comment">
            <h3>{{ "details-page.add-comment" | translate }}</h3>
            <form>
              <textarea name="" id=""></textarea>
              <div class="d-flex justify-content-end">
                <button class="explore-btn" mat-raised-button color="primary">
                  {{ "details-page.send" | translate }}
                </button>
              </div>
              <star-rating class="m-0" [rating]="5"></star-rating>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
